---
title: 基础
toc: true
date: 2017-07-12  19:24:10
tags: [前端,React,基础]
---

## 概述

`react的优势`

* 组件式开发 代码清晰

* 采用单向数据流，数据流动方向单一，可跟踪
组件化，JSX 自定义标签，便于抽象化


### 什么是虚拟dom,React如何实现,和dom对比

* 虚拟的DOM

>核心思想是：对复杂的文档DOM结构，提供一种方便的工具，进行最小化地DOM操作 用JS表示DOM结构

>如果没有 Virtual DOM，简单来说就是直接重置 innerHTML。这样操作，在一个大型列表所有数据都变了的情况下，还算是合理，但是，当只有一行数据发生变化时，它也需要重置整个 innerHTML，这时候显然就造成了大量浪费。

* React实现

>用JS对象模拟DOM树 比较两棵虚拟DOM树的差异 把差异应用到真正的DOM树上

>用 JavaScript 对象结构表示 DOM 树的结构；然后用这个树构建一个真正的 DOM 树，插到文档当中当状态变更的时候，重新构造一棵新的对象树。然后用新的树和旧的树进行比较，记录两棵树差异

## props和state的区别


>state只能在组件内部使用，state只应该用于存储简单的视图状（如：上面示例用于控制下拉框的可见状态）

>State如果component的某些状态需要被改变，并且会影响到component的render，那么这些状态就应该用state表示。例如：一个购物车的component，会根据用户在购物车中添加的产品和产品数量，显示不同的价格，那么“总价”这个状态，就应该用state表示。
         
>Props会在整个组件数中传递数据和配置，props可以设置任命类型的数据，应该把它当做组件的数据源。其不但可以用于上级组件与下组件的通信，也可以用其做为事件处理器。
         
>Props如果component的某些状态由外部所决定，并且会影响到component的render，那么这些状态就应该用props表示。例如：一个下拉菜单的component，有哪些菜单项，是由这个component的使用者和使用场景决定的，那么“菜单项”这个状态，就应该用props表示，并且由外部传入。
        
>props和state都不能直接修改，而应该分别使用setProps()和setSate()方法修改




## 为什么要单向数据流

单向数据流：通过事件分发器 (dispatcher)，开发者必须显式地通过这个统一的事件机制做数据变更通知

>这样做的好处是所有状态变化都可以被记录、跟踪，状态变化通过手动调用通知，源头易追溯，使得程序更直观更容易理解，有利于应用的可维护性。缺点则是代码量会相应的上升

>单向数据绑定的实现思路所有数据只有一份一旦数据变化，就去更新页面(data-页面)

> 但是没有(页面-data)如果用户在页面上做了变动。那么就手动收集起来(双向是自动)，合并到原有的数据中

## React设计思想

> 设计 React 的核心前提是认为 UI 只是把数据通过映射关系变换成另一种形式的数据。同样的输入必会有同样的输出。这恰好就是纯函数。



